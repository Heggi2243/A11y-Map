<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Session Manager</title>
    <link rel="icon" href="img/a11y.ico" type="image/x-icon">
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="/js/firebase-config.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chiron+GoRound+TC:wght@200..900&display=swap" rel="stylesheet">
    
    <!-- tailwindCSS -->
    <link rel="stylesheet" href="./output.css">

     <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
  </head>

  <body class="flex flex-col min-h-screen relative overflow-x-hidden text-blue-900">
    
    <!-- Loading Overlay -->
    <div id="loading-overlay">
      <div class="text-center">
        <div class="text-4xl font-bold text-blue-900 mb-4 retro-font">VERIFYING...</div>
        <div class="text-sm text-gray-600">Checking authentication</div>
      </div>
    </div>
    
    <!-- Sunburst Decoration -->
    <div id="Sunburst"></div>

    <main class="flex-grow container mx-auto px-4 py-8 md:py-12 z-10 relative max-w-6xl">
        
        <!-- Header Section -->
        <header class="mb-6 relative flex justify-between items-start">
          <div>
            <h1 class="text-6xl sm:text-7xl font-display font-black text-retro-blue tracking-tighter leading-[0.85] mb-4">
              LOGIN<br />
              SESSION<br />
              MANAGER
            </h1>
            <div class="w-24 h-4 bg-amber-400 mt-4"></div>
          </div>
          
          <!-- Logout Button -->
          <button id="logout-btn" class="bg-red-600 text-white border-2 border-red-800 py-2 px-4 font-bold uppercase tracking-wide hover:bg-red-700 transition-all shadow-[4px_4px_0px_0px_rgba(153,27,27,1)] active:translate-y-1">
            LOGOUT
          </button>
        </header>


        
         <!-- Navigation Section -->
        <nav class="mb-12 flex justify-center flex-wrap gap-4 z-10 relative">
          <a href="uploadPage.html" class="bg-white text-blue-900 font-bold border-4 border-blue-900 px-6 py-2 uppercase tracking-wider hover:bg-retro-blue hover:text-white shadow-[4px_4px_0px_0px_rgba(30,58,138,1)] active:translate-y-1 transition-all no-underline text-center">
            上傳商店資料
          </a>
          <a href="index.html" class="bg-white text-blue-900 font-bold border-4 border-blue-900 px-6 py-2 uppercase tracking-wider hover:bg-retro-blue hover:text-white shadow-[4px_4px_0px_0px_rgba(30,58,138,1)] active:translate-y-1 transition-all no-underline text-center">
            首頁
          </a>
          <a href="storePage.html" class="bg-white text-blue-900 font-bold border-4 border-blue-900 px-6 py-2 uppercase tracking-wider hover:bg-retro-blue hover:text-white shadow-[4px_4px_0px_0px_rgba(30,58,138,1)] active:translate-y-1 transition-all no-underline text-center">
            管理商店資料
          </a>
          <a href="seo.html" class="bg-white text-blue-900 font-bold border-4 border-blue-900 px-6 py-2 uppercase tracking-wider hover:bg-retro-blue hover:text-white shadow-[4px_4px_0px_0px_rgba(30,58,138,1)] active:translate-y-1 transition-all no-underline text-center">
            SEO管理
          </a>
        </nav>


        <!-- User Info -->
        <div id="user-info" class="mb-6 bg-blue-100 border-2 border-blue-900 p-4 text-sm font-bold">
          ▣ 登入帳號: <span id="current-user-email" class="text-blue-600"></span>
        </div>

        <!-- Filter Section -->
        <section class="mb-12 border-4 border-blue-900 bg-white p-6 md:p-8 shadow-[8px_8px_0px_0px_rgba(30,58,138,1)] relative z-10">
            <h2 class="text-2xl md:text-3xl text-blue-900 mb-6 retro-font tracking-tight font-bold">
                FILTER_LOGS
            </h2>
            
            <div class="flex flex-col md:flex-row gap-6 items-end">
                <!-- Admin Select -->
                <div class="w-full md:w-1/3">
                    <label class="block text-blue-900 font-bold mb-2 uppercase tracking-wider text-sm">
                        人員
                    </label>
                    <div class="relative">
                        <select id="admin-select" class="block appearance-none w-full bg-blue-50 border-2 border-blue-900 text-blue-900 py-3 px-4 pr-8 rounded-none focus:outline-none focus:bg-white font-bold cursor-pointer hover:bg-blue-100 transition-colors">
                            <option value="">所有使用者</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-blue-900">
                          <i data-lucide="chevron-down" size="24"></i>  
                        </div>
                    </div>
                </div>

                <!-- Time Range Select -->
                <div class="w-full md:w-1/3">
                    <label class="block text-blue-900 font-bold mb-2 uppercase tracking-wider text-sm">
                        時間範圍
                    </label>
                    <div class="relative">
                        <select id="time-select" class="block appearance-none w-full bg-blue-50 border-2 border-blue-900 text-blue-900 py-3 px-4 pr-8 rounded-none focus:outline-none focus:bg-white font-bold cursor-pointer hover:bg-blue-100 transition-colors">
                            <option value="TODAY">今天</option>
                            <option value="ONE_WEEK" selected>過去7天</option>
                            <option value="ONE_MONTH">近30天</option>
                            <option value="THREE_MONTHS">3個月內</option>
                            <option value="ALL">所有時間</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-blue-900">
                            <i data-lucide="chevron-down" size="24"></i> 
                        </div>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="w-full md:w-1/3">
                    <button id="filter-btn" class="w-full bg-blue-900 text-white border-2 border-blue-900 py-3 px-6 font-bold uppercase tracking-widest hover:bg-blue-800 hover:text-white transition-all active:translate-y-1 shadow-[4px_4px_0px_0px_rgba(251,191,36,1)]">
                        篩選查詢
                    </button>
                </div>
            </div>
        </section>

        <!-- Table Section -->
        <section class="mb-12 border-4 border-blue-900 bg-white shadow-[8px_8px_0px_0px_rgba(30,58,138,1)] relative z-10 overflow-hidden">
            <div class="overflow-x-auto">
                <table class="min-w-full text-left">
                    <thead class="bg-blue-900 text-white">
                        <tr>
                        <th class="px-6 py-4 text-sm font-bold uppercase tracking-wider border-b-4 border-blue-800">時間</th>
                        <th class="px-6 py-4 text-sm font-bold uppercase tracking-wider border-b-4 border-blue-800">管理員</th>
                        <th class="px-6 py-4 text-sm font-bold uppercase tracking-wider border-b-4 border-blue-800">IP位置</th>
                        <th class="px-6 py-4 text-sm font-bold uppercase tracking-wider border-b-4 border-blue-800">作業系統</th>
                        <th class="px-6 py-4 text-sm font-bold uppercase tracking-wider border-b-4 border-blue-800">瀏覽器</th>
                        <th class="px-6 py-4 text-sm font-bold uppercase tracking-wider border-b-4 border-blue-800">裝置</th>
                        <th class="px-6 py-4 text-sm font-bold uppercase tracking-wider border-b-4 border-blue-800">狀態</th>
                        </tr>
                    </thead>
                    <tbody id="table-body" class="divide-y-2 divide-blue-100">
                        <tr>
                            <td colspan="6" class="px-6 py-12 text-center text-gray-500">
                                Loading sessions...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

    </main>

    <!-- Checkerboard Footer -->
    <footer class="w-full mt-auto">
        <div class="w-full h-16 md:h-24 flex flex-wrap overflow-hidden border-t-4 border-blue-900 checkerboard-pattern">
            </div>
        <div class="copyright-bar">
            暢行無阻 A11y-Map © 2025
        </div>
    </footer>
    
    <script type="module">
      import { createSun } from '/layout/backend.js';
      document.getElementById('Sunburst').innerHTML = createSun();
    </script>
    <script type="module" src="js/admin.js"></script>
        <script>
          lucide.createIcons();
        </script>
  </body>
</html>